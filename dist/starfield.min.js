!function(t){const e={numStars:250,baseSpeed:1,trailLength:.8,starColor:"rgb(255, 255, 255)",maxAcceleration:10,accelerationRate:.2,decelerationRate:.2,minSpawnRadius:80,maxSpawnRadius:500,auto:!0,originX:null,originY:null};let i,n,s,o,a,r,h=[],l=!1,c=0,p=0,u=0,d=0,g=0,f=0;function y(t,e){const i=t.getBoundingClientRect(),n=e.getBoundingClientRect();return i.top-n.top+i.height/2}function v(t,e){const i=t.getBoundingClientRect(),n=e.getBoundingClientRect();return i.left-n.left+i.width/2}function x(){const t=b(0,2*Math.PI),i=b(e.minSpawnRadius,e.maxSpawnRadius),n=p+Math.cos(t)*i,s=u+Math.sin(t)*i;return new m(n,s)}class m{constructor(t,i){this.pos={x:t,y:i},this.prevpos={x:t,y:i},this.vel={x:0,y:0},this.angle=Math.atan2(i-u,t-p),this.baseSpeed=b(.5*e.baseSpeed,1.5*e.baseSpeed),this.isVisible=!0}reset(){const t=x();this.pos.x=t.pos.x,this.pos.y=t.pos.y,this.prevpos.x=this.pos.x,this.prevpos.y=this.pos.y,this.vel.x=0,this.vel.y=0,this.baseSpeed=b(.5*e.baseSpeed,1.5*e.baseSpeed),this.angle=Math.atan2(this.pos.y-u,this.pos.x-p)}update(t,e){const i=t*this.baseSpeed;this.vel.x+=Math.cos(this.angle)*i*e,this.vel.y+=Math.sin(this.angle)*i*e,this.prevpos.x=this.pos.x,this.prevpos.y=this.pos.y,this.pos.x+=this.vel.x*e,this.pos.y+=this.vel.y*e}draw(){const t=Math.sqrt(this.vel.x*this.vel.x+this.vel.y*this.vel.y),i=w(t,0,10,0,1),s=w(t,0,10,1,3);n.lineWidth=s;const[o,a,r]=function(t){const e=/rgba?\((\d+),\s*(\d+),\s*(\d+)/,i=t.match(e);if(i)return[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)];return[255,255,255]}(e.starColor);n.strokeStyle=`rgba(${o}, ${a}, ${r}, ${i})`,n.beginPath(),n.moveTo(this.prevpos.x,this.prevpos.y),n.lineTo(this.pos.x,this.pos.y),n.stroke()}isActive(){return t=this.pos.x,e=this.pos.y,t>=0&&t<=s&&e>=0&&e<=o;var t,e}updateAngle(){this.angle=Math.atan2(this.pos.y-u,this.pos.x-p)}}function S(t){f||(f=t);const i=(t-f)/16.67;f=t,e.auto&&(p=v(a,r),u=y(a,r),p===d&&u===g||(h.forEach((t=>{t.updateAngle()})),d=p,g=u)),n.fillStyle=`rgba(0, 0, 0, ${1-e.trailLength})`,n.fillRect(0,0,s,o),c=l?Math.min(c+e.accelerationRate*i,e.maxAcceleration):Math.max(c-e.decelerationRate*i,0);const x=.01*(1+10*c);for(let t of h)t.update(x,i),t.draw(),t.isActive()||t.reset();requestAnimationFrame(S)}function b(t,e){return Math.random()*(e-t)+t}function w(t,e,i,n,s){return(t-e)/(i-e)*(s-n)+n}t.setup=function(t={}){Object.assign(e,t),r=document.querySelector(".starfield"),r.style.position="relative",s=r.clientWidth,o=r.clientHeight,i=document.createElement("canvas"),i.width=s,i.height=o,i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.zIndex="-1",r.appendChild(i),n=i.getContext("2d"),e.auto?(a=document.querySelector(".starfield-origin"),p=v(a,r),u=y(a,r),a.addEventListener("mouseenter",(()=>l=!0)),a.addEventListener("mouseleave",(()=>l=!1)),window.addEventListener("resize",(()=>function(t,e){s=t.clientWidth,o=t.clientHeight,i.width=s,i.height=o,p=v(e,t),u=y(e,t),h.forEach((t=>t.reset()))}(r,a)))):(p=null!==e.originX?e.originX:s/2,u=null!==e.originY?e.originY:o/2);for(let t=0;t<e.numStars;t++){const t=x();h.push(t)}document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&(f=performance.now())})),requestAnimationFrame(S)},t.setAccelerate=function(t){l=t},t.setOrigin=function(t,e){p=t,u=e,h.forEach((t=>{t.angle=Math.atan2(t.pos.y-u,t.pos.x-p)}))},t.setOriginX=function(t){p=t,h.forEach((t=>{t.angle=Math.atan2(t.pos.y-u,t.pos.x-p)}))},t.setOriginY=function(t){u=t,h.forEach((t=>{t.angle=Math.atan2(t.pos.y-u,t.pos.x-p)}))},t.resize=function(t,n){s=t,o=n,i.width=s,i.height=o,u=null!==e.originY?e.originY:o/2,h.forEach((t=>t.reset()))},t.config=e}(window.Starfield=window.Starfield||{});
