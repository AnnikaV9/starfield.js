!function(t){const e={numStars:250,baseSpeed:1,trailLength:.8,starColor:"rgb(255, 255, 255)",hueJitter:0,maxAcceleration:10,accelerationRate:.2,decelerationRate:.2,minSpawnRadius:80,maxSpawnRadius:500,auto:!0,originX:null,originY:null};let i,s,n,o,a,r,h=[],l=!1,c=0,u=0,p=0,d=0,g=0,f=0;function y(t,e){const i=t.getBoundingClientRect(),s=e.getBoundingClientRect();return i.top-s.top+i.height/2}function v(t,e){const i=t.getBoundingClientRect(),s=e.getBoundingClientRect();return i.left-s.left+i.width/2}function x(){const t=S(0,2*Math.PI),i=S(e.minSpawnRadius,e.maxSpawnRadius),s=u+Math.cos(t)*i,n=p+Math.sin(t)*i;return new m(s,n)}class m{constructor(t,i){this.pos={x:t,y:i},this.prevpos={x:t,y:i},this.vel={x:0,y:0},this.angle=Math.atan2(i-p,t-u),this.baseSpeed=S(.5*e.baseSpeed,1.5*e.baseSpeed),this.hueOffset=S(-e.hueJitter,e.hueJitter),this.isVisible=!0}reset(){const t=x();this.pos.x=t.pos.x,this.pos.y=t.pos.y,this.prevpos.x=this.pos.x,this.prevpos.y=this.pos.y,this.vel.x=0,this.vel.y=0,this.baseSpeed=S(.5*e.baseSpeed,1.5*e.baseSpeed),this.angle=Math.atan2(this.pos.y-p,this.pos.x-u),this.hueOffset=S(-e.hueJitter,e.hueJitter)}update(t,e){const i=t*this.baseSpeed;this.vel.x+=Math.cos(this.angle)*i*e,this.vel.y+=Math.sin(this.angle)*i*e,this.prevpos.x=this.pos.x,this.prevpos.y=this.pos.y,this.pos.x+=this.vel.x*e,this.pos.y+=this.vel.y*e}draw(){const t=Math.sqrt(this.vel.x*this.vel.x+this.vel.y*this.vel.y),i=w(t,0,10,0,1),n=w(t,0,10,1,3);s.lineWidth=n;const[o,a,r]=function(t){const e=/rgba?\((\d+),\s*(\d+),\s*(\d+)/,i=t.match(e);if(i)return[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)];return[255,255,255]}(e.starColor),[h,l,c]=function(t,e,i){t/=255,e/=255,i/=255;const s=Math.max(t,e,i),n=Math.min(t,e,i);let o,a,r=(s+n)/2;if(s===n)o=a=0;else{const h=s-n;switch(a=r>.5?h/(2-s-n):h/(s+n),s){case t:o=(e-i)/h+(e<i?6:0);break;case e:o=(i-t)/h+2;break;case i:o=(t-e)/h+4}o/=6}return[360*o,a,r]}(o,a,r),u=(h+this.hueOffset+360)%360,[p,d,g]=function(t,e,i){let s,n,o;if(t/=360,0===e)s=n=o=i;else{const a=(t,e,i)=>(i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t),r=i<.5?i*(1+e):i+e-i*e,h=2*i-r;s=a(h,r,t+1/3),n=a(h,r,t),o=a(h,r,t-1/3)}return[255*s,255*n,255*o]}(u,l,c).map((t=>Math.round(t)));s.strokeStyle=`rgba(${p}, ${d}, ${g}, ${i})`,s.beginPath(),s.moveTo(this.prevpos.x,this.prevpos.y),s.lineTo(this.pos.x,this.pos.y),s.stroke()}isActive(){return t=this.pos.x,e=this.pos.y,t>=0&&t<=n&&e>=0&&e<=o;var t,e}updateAngle(){this.angle=Math.atan2(this.pos.y-p,this.pos.x-u)}}function b(t){f||(f=t);const i=(t-f)/16.67;f=t,e.auto&&(u=v(a,r),p=y(a,r),u===d&&p===g||(h.forEach((t=>{t.updateAngle()})),d=u,g=p)),s.fillStyle=`rgba(0, 0, 0, ${1-e.trailLength})`,s.fillRect(0,0,n,o),c=l?Math.min(c+e.accelerationRate*i,e.maxAcceleration):Math.max(c-e.decelerationRate*i,0);const x=.01*(1+10*c);for(let t of h)t.update(x,i),t.draw(),t.isActive()||t.reset();requestAnimationFrame(b)}function S(t,e){return Math.random()*(e-t)+t}function w(t,e,i,s,n){return(t-e)/(i-e)*(n-s)+s}t.setup=function(t={}){Object.assign(e,t),r=document.querySelector(".starfield"),r.style.position="relative",n=r.clientWidth,o=r.clientHeight,i=document.createElement("canvas"),i.width=n,i.height=o,i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.zIndex="-1",r.appendChild(i),s=i.getContext("2d"),e.auto?(a=document.querySelector(".starfield-origin"),u=v(a,r),p=y(a,r),a.addEventListener("mouseenter",(()=>l=!0)),a.addEventListener("mouseleave",(()=>l=!1)),window.addEventListener("resize",(()=>function(t,e){n=t.clientWidth,o=t.clientHeight,i.width=n,i.height=o,u=v(e,t),p=y(e,t),h.forEach((t=>t.reset()))}(r,a)))):(u=null!==e.originX?e.originX:n/2,p=null!==e.originY?e.originY:o/2);for(let t=0;t<e.numStars;t++){const t=x();h.push(t)}document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&(f=performance.now())})),requestAnimationFrame(b)},t.setAccelerate=function(t){l=t},t.setOrigin=function(t,e){u=t,p=e,h.forEach((t=>{t.angle=Math.atan2(t.pos.y-p,t.pos.x-u)}))},t.setOriginX=function(t){u=t,h.forEach((t=>{t.angle=Math.atan2(t.pos.y-p,t.pos.x-u)}))},t.setOriginY=function(t){p=t,h.forEach((t=>{t.angle=Math.atan2(t.pos.y-p,t.pos.x-u)}))},t.resize=function(t,s){n=t,o=s,i.width=n,i.height=o,p=null!==e.originY?e.originY:o/2,h.forEach((t=>t.reset()))},t.config=e}(window.Starfield=window.Starfield||{});
