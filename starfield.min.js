!function(t){const e={numStars:250,baseSpeed:1,maxAcceleration:10,accelerationRate:.2,decelerationRate:.2,minSpawnRadius:80,maxSpawnRadius:500};let i,s,n,o,a=[],h=!1,r=0,l=0,c=0;function p(t,e){const i=t.getBoundingClientRect(),s=e.getBoundingClientRect();return i.top-s.top+i.height/2}function d(){const t=y(0,2*Math.PI),i=y(e.minSpawnRadius,e.maxSpawnRadius),s=n/2+Math.cos(t)*i,o=l+Math.sin(t)*i;return new u(s,o)}class u{constructor(t,i){this.pos={x:t,y:i},this.prevpos={x:t,y:i},this.vel={x:0,y:0},this.angle=Math.atan2(i-l,t-n/2),this.baseSpeed=y(.5*e.baseSpeed,1.5*e.baseSpeed),this.isVisible=!0}reset(){const t=d();this.pos.x=t.pos.x,this.pos.y=t.pos.y,this.prevpos.x=this.pos.x,this.prevpos.y=this.pos.y,this.vel.x=0,this.vel.y=0,this.angle=Math.atan2(this.pos.y-l,this.pos.x-n/2)}update(t,e){const i=t*this.baseSpeed;this.vel.x+=Math.cos(this.angle)*i*e,this.vel.y+=Math.sin(this.angle)*i*e,this.prevpos.x=this.pos.x,this.prevpos.y=this.pos.y,this.pos.x+=this.vel.x*e,this.pos.y+=this.vel.y*e}draw(){const t=Math.sqrt(this.vel.x*this.vel.x+this.vel.y*this.vel.y),e=m(t,0,10,0,1),i=m(t,0,10,1,3);s.lineWidth=i,s.strokeStyle=`rgba(255, 255, 255, ${e})`,s.beginPath(),s.moveTo(this.prevpos.x,this.prevpos.y),s.lineTo(this.pos.x,this.pos.y),s.stroke()}isActive(){return t=this.pos.x,e=this.pos.y,t>=0&&t<=n&&e>=0&&e<=o;var t,e}}function v(t){c||(c=t);const i=(t-c)/16.67;c=t,s.fillStyle="rgba(0, 0, 0, 0.2)",s.fillRect(0,0,n,o),r=h?Math.min(r+e.accelerationRate*i,e.maxAcceleration):Math.max(r-e.decelerationRate*i,0);const l=.01*(1+10*r);for(let t of a)t.update(l,i),t.draw(),t.isActive()||t.reset();requestAnimationFrame(v)}function y(t,e){return Math.random()*(e-t)+t}function m(t,e,i,s,n){return(t-e)/(i-e)*(n-s)+s}t.setup=function(t={}){Object.assign(e,t);const r=document.querySelector(".starfield"),u=document.querySelector(".starfield-origin");r.position="relative",n=r.clientWidth,o=r.clientHeight,i=document.createElement("canvas"),i.width=n,i.height=o,i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.zIndex="-1",r.appendChild(i),s=i.getContext("2d"),l=p(u,r),containerBottomY=o;for(let t=0;t<e.numStars;t++){const t=d();a.push(t)}u.addEventListener("mouseenter",(()=>h=!0)),u.addEventListener("mouseleave",(()=>h=!1)),window.addEventListener("resize",(()=>function(t,e){n=t.clientWidth,o=t.clientHeight,i.width=n,i.height=o,l=p(e,t),containerBottomY=o,a.forEach((t=>t.reset()))}(r,u))),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&(c=performance.now())})),requestAnimationFrame(v)}}(window.Starfield=window.Starfield||{});
