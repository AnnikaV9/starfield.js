!function(t){const e={numStars:250,baseSpeed:1,trailLength:.8,starColor:"rgb(255, 255, 255)",maxAcceleration:10,accelerationRate:.2,decelerationRate:.2,minSpawnRadius:80,maxSpawnRadius:500,auto:!0,originX:null,originY:null};let i,n,s,o,a,r=[],h=!1,l=0,c=0,p=0,u=0;function d(t,e){const i=t.getBoundingClientRect(),n=e.getBoundingClientRect();return i.top-n.top+i.height/2}function g(t,e){const i=t.getBoundingClientRect(),n=e.getBoundingClientRect();return i.left-n.left+i.width/2}function f(){const t=x(0,2*Math.PI),i=x(e.minSpawnRadius,e.maxSpawnRadius),n=c+Math.cos(t)*i,s=p+Math.sin(t)*i;return new y(n,s)}class y{constructor(t,i){this.pos={x:t,y:i},this.prevpos={x:t,y:i},this.vel={x:0,y:0},this.angle=Math.atan2(i-p,t-c),this.baseSpeed=x(.5*e.baseSpeed,1.5*e.baseSpeed),this.isVisible=!0}reset(){const t=f();this.pos.x=t.pos.x,this.pos.y=t.pos.y,this.prevpos.x=this.pos.x,this.prevpos.y=this.pos.y,this.vel.x=0,this.vel.y=0,this.angle=Math.atan2(this.pos.y-p,this.pos.x-c)}update(t,e){const i=t*this.baseSpeed;this.vel.x+=Math.cos(this.angle)*i*e,this.vel.y+=Math.sin(this.angle)*i*e,this.prevpos.x=this.pos.x,this.prevpos.y=this.pos.y,this.pos.x+=this.vel.x*e,this.pos.y+=this.vel.y*e}draw(){const t=Math.sqrt(this.vel.x*this.vel.x+this.vel.y*this.vel.y),i=m(t,0,10,0,1),s=m(t,0,10,1,3);n.lineWidth=s;const[o,a,r]=function(t){const e=/rgba?\((\d+),\s*(\d+),\s*(\d+)/,i=t.match(e);if(i)return[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)];return[255,255,255]}(e.starColor);n.strokeStyle=`rgba(${o}, ${a}, ${r}, ${i})`,n.beginPath(),n.moveTo(this.prevpos.x,this.prevpos.y),n.lineTo(this.pos.x,this.pos.y),n.stroke()}isActive(){return t=this.pos.x,e=this.pos.y,t>=0&&t<=s&&e>=0&&e<=o;var t,e}}function v(t){u||(u=t);const i=(t-u)/16.67;u=t,n.fillStyle=`rgba(0, 0, 0, ${1-e.trailLength})`,n.fillRect(0,0,s,o),l=h?Math.min(l+e.accelerationRate*i,e.maxAcceleration):Math.max(l-e.decelerationRate*i,0);const a=.01*(1+10*l);for(let t of r)t.update(a,i),t.draw(),t.isActive()||t.reset();requestAnimationFrame(v)}function x(t,e){return Math.random()*(e-t)+t}function m(t,e,i,n,s){return(t-e)/(i-e)*(s-n)+n}t.setup=function(t={}){Object.assign(e,t);const l=document.querySelector(".starfield");l.style.position="relative",s=l.clientWidth,o=l.clientHeight,i=document.createElement("canvas"),i.width=s,i.height=o,i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.zIndex="-1",l.appendChild(i),n=i.getContext("2d"),e.auto?(a=document.querySelector(".starfield-origin"),c=g(a,l),p=d(a,l),a.addEventListener("mouseenter",(()=>h=!0)),a.addEventListener("mouseleave",(()=>h=!1)),window.addEventListener("resize",(()=>function(t,e){s=t.clientWidth,o=t.clientHeight,i.width=s,i.height=o,c=g(e,t),p=d(e,t),r.forEach((t=>t.reset()))}(l,a)))):(c=null!==e.originX?e.originX:s/2,p=null!==e.originY?e.originY:o/2);for(let t=0;t<e.numStars;t++){const t=f();r.push(t)}document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&(u=performance.now())})),requestAnimationFrame(v)},t.setAccelerate=function(t){h=t},t.setOrigin=function(t,e){c=t,p=e,r.forEach((t=>{t.angle=Math.atan2(t.pos.y-p,t.pos.x-c)}))},t.setOriginX=function(t){c=t,r.forEach((t=>{t.angle=Math.atan2(t.pos.y-p,t.pos.x-c)}))},t.setOriginY=function(t){p=t,r.forEach((t=>{t.angle=Math.atan2(t.pos.y-p,t.pos.x-c)}))},t.resize=function(t,n){s=t,o=n,i.width=s,i.height=o,p=null!==e.originY?e.originY:o/2,r.forEach((t=>t.reset()))},t.config=e}(window.Starfield=window.Starfield||{});
